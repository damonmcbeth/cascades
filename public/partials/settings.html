

<div class="settingsbar sidebar-content" id="settingsbar" ng-controller="SettingsController">
    <div class="sidebar-header" style="height: auto">
        <div class="header-title">
            <span>Preferences</span>
        </div>
        <div class="header-close">
            <i class="pe-7s-angle-right-circle" ng-click="nav.hideSideViewForm()"></i>
        </div>
    </div>
    <div class="sidebar-body" resize height-offset="75" style="width: 100%">
	    <md-content class="settings" style="height: 100%; background-color: #f1f3f2">
		    <md-tabs md-dynamic-height="true">
		      <md-tab id="tabProfile">
		        <md-tab-label>Profile</md-tab-label>
		        <md-tab-body>
		        	<div class="p-10" style="background-color: #f1f3f2">
				        <form name="profileForm">
					        <div class="panel panel-default">
					            <div class="panel-body">
						            
						            <div class="row p-10 align-center">
					                    <div class="col">
						                    <div class="align-center m-b-10">
						                        <avatar size="lg" img="currPerson.avatar" state="'Established'" 
						                        		name="currPerson.name" type="currPerson.avatarType"></avatar>
						                    </div>
					                    
											<div>
												<h4>{{currPerson.name}}</h4>
											</div>
									        
					                        <div class="f-12 b-300 text-muted m-t-5">
					                            <span>{{ currPerson.status | uppercase }}</span>
					                        </div>
					                        
					                        <div class="b-400 m-t-20">
						                        <a href="" class="m-r-5" ng-click="openPersonDetails(currPerson.$id)">PROFILE DETAILS</a>|
						                        <a href="" class="m-l-5" ng-click="signOut()">SIGN OUT</a>
						                    </div>
					                    </div>
					                </div>
					            </div>
							</div>
							
							<div class="panel panel-default">
					            <div class="panel-body">
									<md-switch class="md-primary f-15 m-b-15" md-no-ink="true" ng-model="currPerson.sendEmails" ng-change="updatePerson()">
										Send emails for notifications
									</md-switch>
									<md-switch class="md-primary f-15 m-b-15" md-no-ink="true" ng-model="currPerson.sendNotifications" ng-change="updatePerson()">
										Enable desktop notifications
									</md-switch>

									<a href="" class="btn btn-inverse btn-block f-15 m-t-25" ng-click="resetPassword()">
										Reset Password
									</a>
					            </div>
							</div>
				        </form>
		        	</div>
		        
		        	<div class="p-15 f-14">
<!--pre>
{{ gs.currProfile | json }}
</pre>
<pre>
{{ gs.currPreferences | json }}
</pre-->
		        	</div>
		        </md-tab-body>
		      </md-tab>
		      <md-tab id="tabWorkspace">
		        <md-tab-label>Workspace</md-tab-label>
		        <md-tab-body>
					<div data-ng-include="'partials/settings_workspace.html'"></div>
		        	<div class="p-15 f-14">
<!--pre>
{{ gs.userWorkspaces | json }}
</pre-->
		        	</div>

		        </md-tab-body>
			  </md-tab>
			  
		      <md-tab id="tabTags">
		        <md-tab-label>Tags</md-tab-label>
		        <md-tab-body>
		        	<div data-ng-include="'partials/tagManager.html'" data-ng-controller="TagController"></div>

		        </md-tab-body>
		      </md-tab>
		      <md-tab id="tabTasks">
		        <md-tab-label>{{gs.currWorkspace.Terminology.taskAliasPlural}}</md-tab-label>
		        <md-tab-body>
		        	<div class="f-14">
						<md-content class="p-10" style="height: 100%; width: 100%; background-color: #f1f3f2" ng-show="!showDetails">
							<div class="panel panel-default">
								<div class="panel-body">

									<label>{{gs.currWorkspace.Terminology.taskAlias}} due soon</label>
									<!--md-input-container class="md-block">	
											<md-radio-group ng-model="currPreferences.Settings.Task.soon" layout="column" ng-change="updateUserPreferences()">
												<md-radio-button value="{{tsOptions.value}}" class="md-primary"
													ng-repeat="tsOptions in taskDueSoonOptions">{{tsOptions.label}}</md-radio-button>
											</md-radio-group>
									</md-input-container-->

									<md-slider-container class="m-b-20">
										<md-input-container>
											<input flex type="number" ng-model="currPreferences.Settings.Task.soon" aria-label="due soon" 
												ng-change="updateUserPreferences()" aria-controls="red-slider">
										</md-input-container>
										
										<span class="m-r-10">days</span>
										<md-slider flex min="0" max="60" ng-model="currPreferences.Settings.Task.soon" aria-label="due soon" id="red-slider"
											class="md-primary" ng-mouseup="updateUserPreferences()"></md-slider>
										</md-slider>
									</md-slider-container>
								</div>
							</div>

							<div class="panel panel-default">
								<div class="panel-body">
									<label>List default grouping</label>
									<md-input-container class="md-block">	
										<md-radio-group ng-model="currPreferences.Settings.Task.quickGroup" layout="row" ng-change="updateUserPreferences()">
											<md-radio-button value="{{g1.value}}" class="md-primary"
												ng-repeat="g1 in defaultGroupings">{{g1.label}}</md-radio-button>
										</md-radio-group>
									</md-input-container>

									<md-divider class="m-b-20"></md-divider>
	
									<label>Board default grouping</label>
									<md-input-container class="md-block">
										<md-radio-group ng-model="currPreferences.Settings.Task.taskBoardGroup" layout="row" ng-change="updateUserPreferences()">
											<md-radio-button value="{{g2.value}}" class="md-primary"
												ng-repeat="g2 in defaultGroupings">{{g2.label}}</md-radio-button>
										</md-radio-group>
									</md-input-container>

									<label>Board default sorting</label>
									<md-input-container class="md-block">
										<md-radio-group ng-model="currPreferences.Settings.Task.taskBoardOrder" layout="row" ng-change="updateUserPreferences()">
											<md-radio-button value="{{g2.value}}" class="md-primary"
												ng-repeat="g2 in defaultGroupings">{{g2.label}}</md-radio-button>
										</md-radio-group>
									</md-input-container>
								</div>
							</div>
							
							<div class="panel panel-inverse">
								<div class="panel-heading">
									<h3 class="panel-title">{{gs.currWorkspace.Terminology.taskAlias}} Status</h3>
								</div>
								
								<div class="panel-body p-5">
										<div class="m-b-10 m-t-10 sortable-list connectList" ui-sortable="sortableOptions" style="min-height: 150px">
											<div class="p-5 m-b-10" layout="row">
												<input ng-model="newTaskStatus" class="checklist-item m-l-10" 
														placeholder="Enter new status" type="text" flex="100"
														ng-keydown="$event.keyCode === 13 && addTaskStatus()">
												
												<i class="icon pe-7f-plus text-primary f-25 p-5 p-t-10"
														ng-click="addTaskStatus()" aria-label="Add"></i>
											</div>	
											
											<div ng-repeat="taskState in taskStatusList | orderBy:'order'" class="p-5 ui-sortable" layout="row"
												ng-class="{'not-sortable': !taskState.editable}">
												<i class="pe-7f-menu m-r-10 f-20 text-muted p-t-10" style="color: #ccc; cursor:move" ng-show="taskState.editable"></i>
												<i class="m-r-10 f-20 p-t-10" ng-hide="taskState.editable" style="width: 20px">&nbsp;</i>
												<input id="taskStateItem_{{$index}}" ng-model="taskState.label" class="checklist-item" 
														type="text" flex="100" ng-disabled="!taskState.editable">
												<i class="icon pe-7s-less text-muted f-25 p-5 p-t-10" ng-hide="taskState.editable"></i>

												<i class="icon pe-7s-close-circle text-danger f-25 p-5 p-t-10" ng-show="taskState.editable"
														ng-click="removeTaskState(taskState)" aria-label="Delete"></i>
											</div>	
										</div>
								</div>
							</div>
						</md-content>
		        	</div>

		        </md-tab-body>
		      </md-tab>
		      <md-tab id="tabPeople">
		        <md-tab-label>{{gs.currWorkspace.Terminology.projectAliasPlural}}</md-tab-label>
		        <md-tab-body>
		        	<div class="p-10" style="background-color: #f1f3f2">
		        		<form name="projectForm">
					        <div class="panel panel-inverse">
						        <div class="panel-heading">
					                <h3 class="panel-title">{{gs.currWorkspace.Terminology.projectAlias}} Types</h3>
					            </div>
						        
					            <div class="panel-body">
<pre>
{{ gs.currWorkspace.Settings.Project.types | json }}
</pre>					            
					            </div>
					        </div>
				        </form>
		        	</div>
		        </md-tab-body>
		      </md-tab>
		      <md-tab id="tabPeople">
		        <md-tab-label>{{gs.currWorkspace.Terminology.clientAliasPlural}}</md-tab-label>
		        <md-tab-body>
		        	

		        </md-tab-body>
			  </md-tab>
			  <md-tab id="tabAbout">
		        <md-tab-label>About</md-tab-label>
		        <md-tab-body>
					<div class="align-center p-10">
						<div><image src="/assets/img/Timeline-128.png"></image></div>
						<div class="f-35 b-300">CASCADES</div>
						<div class="m-b-15">BETA</div>
						<div>Copyright &copy; 2017 CASCADES</div>
					</div>

		        </md-tab-body>
		      </md-tab>
		    </md-tabs>
	    </md-content>
    </div>
</div>


<script>
	$( function() {
	  $( "#sortable" ).sortable({
		revert: true
	  });
	  $( "#draggable" ).draggable({
		connectToSortable: "#sortable",
		helper: "clone",
		revert: "invalid"
	  });
	  $( "ul, li" ).disableSelection();
	} );
</script>